#!/bin/bash
## Crafted (c) 2021 by Daitanlabs - We are stronger together
## Prepared : Roberto Nogueira
## File     : today
## Project  : project-today-manager
## Reference: bash
## Depends  : tree, todotxt, xclip
## Purpose  : Help to manage gtd process flow implemented in the file system.

# set -x

export TODAY_VERSION=v1.0.07
export TODAY_VERSION_DATE=2022.01.04
export TODAY_UPDATE_MESSAGE="Initial version"

export TODAY=$HOME/Today
export TODAY_THINGS=$HOME/Things

export TODAY_INBOX=$HOME/Today/Inbox
export TODAY_LOGBOOK=$HOME/Today/Logbook
export TODAY_PROJECTS=$HOME/Today/Projects
export TODAY_SCHEDULED=$HOME/Today/Scheduled
export TODAY_SOMEDAY=$HOME/Today/Someday

# site
today(){
  local site_methods="+($(today.methods))"
  local param_methods="+($(! test -z "$1" && $1.methods))"
  case $1 in
    --version|-v|v|version)
      today.version
      ;;
    --help|-h|h|help)
      printf "\e[1;37m%s \e[0m\n" "Crafted (c) 2021 by Daitanlabs - We are stronger together"
      site.version
      printf "\e[1;37m%s \e[0m%s\n" "site" "[$(today.help)]" 
      printf "::\n"  
      printf "\e[0;32m%s \e[4m%s\e[0m\e[0m\n" "homepage" "http://bitbucket.wrs.com/users/rmartins/repos/project-today-manager"
      printf "\n"
      ;;
    $today_methods)
      if [ -z "$2" ]; then
        $1 
      else  
        case $2 in
          $param_methods)
            $1.$2 ${@:3}
            ;;
          *)
            printf " \e[0;31m%s \e[0m%s\n" "=>" "invalid parameter ${2}"
            ;;  
        esac
      fi  
      ;;
    *)
      if [ -z "$1" ]; then
        cd $TODAY
      else   
        printf " \e[0;31m%s \e[0m%s\n" "=>" "invalid parameter ${1}"
      fi  
      ;;
  esac
}
today.methods(){ echo "help|print|version"; }
today.help(){ printf "\e[1;37m%s   \e[0m \e[1;36m%s\e[0m\n" "site" "[$(today.methods)]"; }
today.print(){
  echo -e "today: \e[4m\e[1;37m$USER@$(hostname)\e[0m\e[0m" 
  printf ""  
}
today.version(){
  printf "\e[0;37m%s \e[0m%s\n" "Site" "$TODAY_VERSION"
  printf "\n"
}